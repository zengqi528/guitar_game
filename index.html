<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Debug Alert</title>
    
    <!-- 1. 全局错误捕获：只要有报错，立马弹窗告诉我们 -->
    <script>
        window.onerror = function(msg, url, line) {
            alert("全局错误:\n" + msg + "\n行号: " + line);
            return false;
        };
    </script>

    <style>
        body { margin: 0; padding: 0; height: 100vh; overflow: hidden; font-family: sans-serif; background: #333; }
        
        /* 启动层：红色背景，非常显眼 */
        #start-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        /* 游戏层：绿色背景，便于区分 */
        #game-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #f0f0f5; z-index: 1;
            display: none; /* 默认隐藏 */
            flex-direction: column;
        }

        /* 巨大的按钮 */
        #magic-btn {
            width: 240px; height: 100px;
            background: blue; color: white;
            font-size: 24px; border: none; border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            /* 强制置顶，防止被遮挡 */
            position: relative; z-index: 10000;
        }

        /* 指板样式 */
        #fretboard {
            position: relative; width: 900px; height: 220px; margin: 20px;
            background: #e4d0a6; border: 5px solid #d4c095;
        }
        .fret { position: absolute; top: 0; bottom: 0; width: 3px; background: #999; }
        .string { position: absolute; left: 0; right: 0; background: #666; pointer-events: none; }
        .dot { position: absolute; width: 20px; height: 20px; background: red; border-radius: 50%; display: none; }
    </style>
</head>
<body>

    <!-- 启动层 -->
    <div id="start-layer">
